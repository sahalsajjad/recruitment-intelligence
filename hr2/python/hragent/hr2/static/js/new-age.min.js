!function(t){
    "use strict";
    t("a.page-scroll").bind("click",function(a){
        var o=t(this);
        t("html, body").stop().animate({scrollTop:t(o.attr("href")).offset().top-50},1250,"easeInOutExpo"),
        a.preventDefault()
    }),
    t("body").scrollspy({target:".navbar-fixed-top",offset:100}),
    t(".navbar-collapse ul li a").click(function(){
        t(".navbar-toggle:visible").click()}
    ),
    t("#mainNav").affix({offset:{top:50}})
}(jQuery);

 $(document).ready(function(){
    var form_wrapper = document.getElementById('form-wrapper'); 
    var form = document.createElement('form');
    var com_node = document.createElement('input');
    var com_node_label = document.createElement('h3');
    var com_node_label_t = document.createTextNode('What is the name of your company?');
    var title_node = document.createElement('input');
    var title_node_label = document.createElement('h3');
    var title_node_label_t = document.createTextNode('What is the title for this job posting?');
    var min_exp_node = document.createElement('input');
    var min_exp_node_label = document.createElement('h3');
    var min_exp_node_label_t = document.createTextNode('Minimum years of experience required (Enter a range)?');
    var select_career = document.createElement('select');
    var select_career_label = document.createElement('h3');
    var select_career_label_t = document.createTextNode('Please select occupation domain');
    form.setAttribute('class','hr-form');
    com_node_label.appendChild(com_node_label_t);
    com_node.setAttribute('type','text');
    com_node.setAttribute('id','comp_name');
    title_node_label.appendChild(title_node_label_t);
    title_node.setAttribute('type','text');
    title_node.setAttribute('id','comp_name');
    min_exp_node_label.appendChild(min_exp_node_label_t);
    min_exp_node.setAttribute('type','text');
    min_exp_node.setAttribute('id','comp_name');
    form_wrapper.appendChild(form);
    form.appendChild(com_node_label); 
    form.appendChild(com_node); 
    form.appendChild(title_node_label); 
    form.appendChild(title_node); 
    form.appendChild(min_exp_node_label); 
    form.appendChild(min_exp_node);    
    select_career.setAttribute('id','occ_domain');
    select_career_label.appendChild(select_career_label_t);
    form.appendChild(select_career_label);
    $.get('/get-it-careers/',function(data){window.sessionStorage.setItem('career_list',data);});
    var career_array = JSON.parse(window.sessionStorage.getItem('career_list'));
    window.career_list = career_array["data"];
    console.log(typeof(career_array));
    for(var i=0; i< window.career_list.length; i++){
    	var option = document.createElement("option");
    	option.value = window.career_list[i];
    	option.text = window.career_list[i];
    	select_career.appendChild(option);
    }
    form.appendChild(select_career);

    $(document).on('change','#occ_domain',function(){
    	alert('changed');
    	var occ  = document.getElementById('occ_domain').value;
    	$.get('/get-sub-profession/?q='+occ, function(data){
    		window.sessionStorage.setItem('sub_profession',data);
    	});
    	var subProf = JSON.parse(window.sessionStorage.getItem('sub_profession'));
        if (document.contains(document.getElementById("profession"))) {
            document.getElementById("profession").remove();
        } 
    	var subProfLabel = document.createElement('h3');
    	var subProfLabelt = document.createTextNode('Please select a profession.');
        subProfLabel.setAttribute('id','profession');
        subProfLabel.appendChild(subProfLabelt);
    	var select_profession = document.createElement('select');
        select_profession.setAttribute('id','select_profession');
        if(document.contains(document.getElementById('select_profession'))){
            document.getElementById('select_profession').remove();
        }
        var cprof_array = JSON.parse(window.sessionStorage.getItem('sub_profession'));
        window.cprof_list = cprof_array["data"];
        console.log(typeof(cprof_array));
        for(var i=0; i< window.cprof_list.length; i++){
            var option = document.createElement("option");
            option.value = window.cprof_list[i];
            option.text = window.cprof_list[i];
            select_profession.appendChild(option);
        }
        form.appendChild(subProfLabel);
        form.appendChild(select_profession);
        
    });
    $.get(' https://api.lever.co/v0/postings/leverdemo?skip=1&limit=3&mode=json',function(data){
            console.log(data);
    });
});